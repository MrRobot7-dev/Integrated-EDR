<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Malware Detection System</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="dashboard">
        <div class="header">
            <h1>Malware Detection Dashboard</h1>
            <p>Overview of the system and sample statistics</p>
        </div>
        
        <div class="nav-menu">
            <a href="{{ url_for('index') }}" class="nav-item">Home</a>
            <a href="{{ url_for('dashboard') }}" class="nav-item active">Dashboard</a>
            <a href="{{ url_for('about') }}" class="nav-item">About</a>
        </div>
        
        <div class="stats-container">
            <div class="stat-card">
                <h3>Total Samples</h3>
                <p class="stat-value">{{ total_samples }}</p>
            </div>
            <div class="stat-card">
                <h3>Malware Samples</h3>
                <p class="stat-value">{{ malware_count }}</p>
            </div>
            <div class="stat-card">
                <h3>Benign Samples</h3>
                <p class="stat-value">{{ benign_count }}</p>
            </div>
        </div>
        
        <div class="chart-section">
            <h3>Sample Distribution</h3>
            <canvas id="distributionChart" width="400" height="200"></canvas>
        </div>
        
        <div class="samples-section">
            <h3>Recent Samples</h3>
            <div class="samples-table">
                <table>
                    <thead>
                        <tr>
                            <th>Hash</th>
                            <th>Feature Density</th>
                            <th>Non-Zero Features</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for sample in random_samples %}
                        <tr>
                            <td>{{ sample.hash }}</td>
                            <td>{{ sample.feature_density }}%</td>
                            <td>{{ sample.non_zero_features }}/{{ sample.total_features }}</td>
                            <td>
                                <a href="{{ url_for('predict') }}?index={{ loop.index0 }}" class="btn-small">Analyze</a>
                            </td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="footer">
            <p>&copy; 2025 Malware Detection System | All Rights Reserved</p>
        </div>
    </div>
    
    <script>
        // Create the distribution chart
        var ctx = document.getElementById('distributionChart').getContext('2d');
        var distributionChart = new Chart(ctx, {
            type: 'pie',
            data: {
                labels: ['Malware', 'Benign'],
                datasets: [{
                    data: [{{ malware_count }}, {{ benign_count }}],
                    backgroundColor: [
                        'rgba(255, 99, 132, 0.7)',
                        'rgba(75, 192, 192, 0.7)'
                    ],
                    borderColor: [
                        'rgba(255, 99, 132, 1)',
                        'rgba(75, 192, 192, 1)'
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                responsive: true,
                plugins: {
                    legend: {
                        position: 'bottom',
                    }
                }
            }
        });
    </script>
</body>
</html> 